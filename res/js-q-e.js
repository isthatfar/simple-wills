function core(){var e,n,s,a=9,o=0,r=0,c=[],d="Â£",p="GBP",l="",u="",v=0,f="",h=0,y=0,_=0,m=0,b=Math.floor(999999999998*Math.random()+1),g="",x="",w=0,q=0,k=0,E=0,C="pk_live_KDocp3YcHStlVkBRgJ7hX1uz00agyhG0oH";const M=document.querySelector.bind(document),F=document.querySelectorAll.bind(document);function S(e,t){return e.querySelector(t)}function L(e,t){return e.querySelectorAll(t)}function P(e,t){e.classList.remove(t)}function T(e,t){e.forEach(e=>e.classList.remove(t))}function A(e,t){e.classList.add(t)}function N(e,t){if(e.classList.contains(t))return!0}function D(e){e.remove()}function B(e){e.forEach(e=>e.remove())}function G(e){e.style.display="block"}function I(e){e.forEach(e=>e.style.display="block")}function O(e){e.style.display="none"}function H(e){e.forEach(e=>e.style.display="none")}function R(e,t){e.insertAdjacentHTML("beforeend",t)}function Y(e,t){e.innerHTML=t}function J(e,t){e.forEach(e=>e.innerHTML=t)}function z(e,t){e.value=t}function W(e){return e.textContent}function U(e,t){return e.getAttribute("data-"+t)}function K(e,t,i){return e.setAttribute("data-"+t,i)}function V(e){return window.getComputedStyle(e)}function X(e){return e.replace(/[<>]/g,"")}async function Z(e,t){return await fetch(e,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(t)})}function $(){a=F(".briefstep").length;var e=5+o/a*95;M(".mobnav .done").style.width=e+"%"}var Q;function ee(e,t){var i=0,n="none";function s(e){e.height="0",e.marginTop="0",e.paddingTop="0",e.paddingBottom="0"}function a(e){e.removeProperty("margin"),e.removeProperty("padding-top"),e.removeProperty("padding-bottom")}function o(e){return e.getBoundingClientRect().height}function r(e,i){ts.transitionProperty="height, margin, padding",ts.transitionDuration=t+"ms",ts.transitionTimingFunction="ease",ts.height=i+"px",ts.overflow="hidden"}"none"==V(e).display&&(n="block"),U(e,"anm")&&(clearTimeout(Q),"none"==U(e,"anm")&&(n="block"),K(e,"anm","")),K(e,"anm",n),ts=e.style;var c=0;(ps=e.previousElementSibling)&&(ns=e.nextElementSibling)&&"none"==V(ns).float&&ps.tagName==ns.tagName&&(c="-"+Math.min(parseFloat(V(ps).marginBottom),parseFloat(V(ns).marginTop))+"px"),"block"==n?(G(e),i=o(e),s(ts),ts.marginBottom=c,e.clientHeight,r(ts,i),a(ts)):(i=o(e),ts.height=i+"px",e.clientHeight,r(ts,i),s(ts),ts.marginBottom=c),Q=window.setTimeout(()=>{ts.display=n,ts.removeProperty("height"),ts.removeProperty("overflow"),a(ts),ts.removeProperty("transition-duration"),ts.removeProperty("transition-property"),ts.removeProperty("transition-timing-function"),K(e,"anm","")},t)}function te(e,t=0,i=""){if(""==l){var n={send_to:"AW-651505487/"},s="",a={event_category:"questionnaire"},o="",r={};switch(e){case"sta":n.send_to+="eCMPCM-a4MwBEM_e1LYC",s="start",a.event_label="started questionnaire",o="ViewContent";break;case"ema":n.send_to+="AT8aCKK2ocIDEM_e1LYC",s="finished-step-1",a.event_label="finished step email",o="AddToCart",window.uetq=window.uetq||[],window.uetq.push("event","signup",{});break;case"ini":n.send_to+="bQ4uCOOQ4MwBEM_e1LYC",s="begin_checkout",a.event_label="begin checkout",o="InitiateCheckout";break;case"pur":n.send_to+="z0J1CJ2P4MwBEM_e1LYC",n.value=t,n.currency=p,s="purchase",a.event_label="purchase",a.value=t,a.currency=p,o="Purchase",r.value=t,r.currency=p,window.uetq=window.uetq||[],window.uetq.push("event","purchase",{event_category:"purchase",event_label:"purchase",event_value:t,revenue_value:t,currency:p})}"function"==typeof gtag&&(""!=i&&"pur"==e&&(n.transaction_id=i),gtag("event","conversion",n),gtag("event",s,a)),"function"==typeof fbq&&fbq("track",o,r,{eventID:"u"+b})}}window.onload=function(){M("#u80OafkB")&&(g=W(M("#u80OafkB")))},""!=location.hash&&history.pushState("",document.title,window.location.pathname+window.location.search),M(".vwvoucher")&&(l=W(M(".vwvoucher"))),A(M(".reqpostcode"),"required");var ie="";(execpref=F(".prefill_executors_list u")[0])&&"Properwills"==W(execpref)&&(ie=" active"),R(M(".qid-executors_list"),'<div class="check '+ie+'"><span></span>Properwills</div>');var ne=parseInt(W(M(".draft_s")));function se(){if(0==k){k=1;var t=document.createElement("script");t.type="text/javascript",t.src="https://js.stripe.com/v3/",t.onload=function(){!function(){function t(e){return n.create(e,{style:{base:{fontSize:"16px"}}})}e=Stripe(C),n=e.elements(),(s=t("cardNumber")).mount("#card-number"),t("cardExpiry").mount("#card-expiry"),t("cardCvc").mount("#card-cvv")}()},document.head.appendChild(t)}}function ae(e){var t=new Date,i=3;1==e?i+=4:2==e&&(4==t.getDay()?i+=2:5==t.getDay()&&(i+=1)),t.setDate(t.getDate()+i);var n=t.getDate(),s=t.getMonth();t.getFullYear();return wdays=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],wmonths=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wdays[t.getDay()]+", "+wmonths[s]+". "+n}ne>0&&(y=1,_=ne,r=1e3,M(".qid-delivery .active")&&(ye(),we(),_e(),O(F(".briefstep")[o]),o=F(".briefstep").length-3,G(M(".brecap")),$(),window.location.hash="#s"+o,se()));var oe="by "+ae(0),re="by "+ae(1),ce="by "+ae(2);function de(){var e=M(".dyn_repartition_sum"),t=0;F(".dyn-repartition input").forEach(e=>{e.value.length>0&&(t+=parseFloat(parseFloat(e.value).toFixed(2)))}),Y(e,(t=parseFloat(t.toFixed(2))).toFixed(2)+"%"),e.style.color=100!=t?"#d7594d":"#0ac672"}Y(M(".radio .d_dl"),oe),Y(M(".radio .d_mail"),re),(urgopt=M(".radio .d_urgent"))&&Y(urgopt,ce),J(F(".listnum .d_dl"),oe);var pe=/^([0-9]{1,3}([\.][0-9]{0,2}){0,1}){0,1}$/;function le(){pe.test(this.value)&&this.value<=100?K(this,"old",this.value):K(this,"old",0)}function ue(){(!pe.test(this.value)||this.value>100)&&z(this,U(this,"old")),de()}var ve=/^([0-9]+([\.][0-9]{0,2}){0,1}){0,1}$/;function fe(){ve.test(this.value)?K(this,"old",this.value):K(this,"old",0)}function he(){ve.test(this.value)||z(this,U(this,"old"))}function ye(){m=1;var e=[],t=[],n=[],s=0;function a(i,a){F(".stepbenef .dyn_"+i).forEach(i=>{L(i,".dyn").forEach(i=>{""!=S(i,".dyn_name").value&&(e.push(W(S(i,".benefid"))),t.push(X(S(i,".dyn_name").value)),n.push(a),1==a&&s++)})})}if(a("people",1),a("charities",0),s<2?(O(M(".repartition_several")),G(M(".repartition_one"))):(G(M(".repartition_several")),O(M(".repartition_one"))),0==c.length)var o=e.length,r=(100/o).toFixed(2),d=(100-(o-1)*r).toFixed(2),p=o-1;for(i=0;i<e.length;i++){var l=0;for(j=0;j<c.length;j++)if(e[i]==c[j]){l=1;break}if(0==l){if(tpers="char",1==n[i]){if(tpers="pers",thisact="",F(".prefill_children_list u").forEach(e=>{W(e)==t[i]&&(thisact=" active")}),R(M(".qid-children_list"),'<div class="check dynbenef-'+e[i]+thisact+'"><span></span>'+t[i]+"</div>"),thisact="",F(".prefill_executors_list u").forEach(e=>{W(e)==t[i]&&(thisact=" active")}),R(M(".qid-executors_list"),'<div class="check dynbenef-'+e[i]+thisact+'"><span></span>'+t[i]+"</div>"),o1=o2=o3=o4="",o3hide="hidden",o3dyns='<div class="dyn clear dtop"><div class="ico avatar"></div><div class="remove"></div><div class="inner"><input type="text" class="input dyn_name dcheck" placeholder="Full Name"><select class="select dyn_rel"><option disabled selected>Relationship to you</option><option>Spouse</option><option>Civil partner</option><option>Partner</option><option>Mother</option><option>Father</option><option>Sister</option><option>Brother</option><option>Cousin</option><option>Daughter</option><option>Son</option><option>Granddaughter</option><option>Grandson</option><option>Great-granddaughter</option><option>Great-grandson</option><option>Niece</option><option>Nephew</option><option>Friend</option><option>Other</option></select><input type="text" class="input dyn_address" placeholder="Address or city"></div></div>',ov=F(".prefill_benefreserve u")[i]){var u=W(ov).slice(-2);"en"==u?o1=" active":"er"==u?o2=" active":"ns"==u?(o3=" active",o3hide="",(prf=M(".prefill_benefreserve_"+i))&&(o3dyns=prf.innerHTML)):"es"==u&&(o4=" active")}R(M(".extra-reserve"),'<div class="form briefstep hidden extra-'+e[i]+'"><span class="benefname hidden">'+t[i]+'</span><div class="item qid-reserve-'+e[i]+' required fs_radio"><div class="qtitle"><b>If <span class="benefname">'+t[i]+'</span> dies before you, what should happen to their gifts and share of your inheritance?</b><span class="helpbtn"></span></div><div class="helptxt">Most people would then want the children or spouse of the beneficiary to benefit from their legacy.</div><div class="radio'+o1+'"><span></span>Give them to their children</div><div class="radio'+o2+'"><span></span>Give them to their spouse or civil partner</div><div class="radio'+o3+'"><span></span>Give them to specific persons</div><div class="radio'+o4+'"><span></span>Share them between the remaining beneficiaries</div></div><div class="item qid-reserve-'+e[i]+"-people dyn_people "+o3hide+' required"><b>To which specific persons?</b><div class="subtext">If <span class="benefname">'+t[i]+'</span> dies before you they will share any gifts or share of your estate <span class="benefname">'+t[i]+'</span> was supposed to get.</div><div class="dyns">'+o3dyns+'</div><div class="dyn_add"><svg aria-hidden="true" role="img"><use xlink:href="#add"></use></svg><span>Add a new person</span></div></div><div class="next"><div class="back">Back</div><div class="button">Next</div></div></div>')}var v="";(giftp=M(".prefill_gift_"+i))&&(v=giftp.innerHTML,D(M(".prefill_gift_"+i))),R(M(".qid-gifts .sd_"+tpers),'<div class="gift_item dynbenef-'+e[i]+'"><div class="benefid">'+e[i]+"</div><b>"+t[i]+'</b><div class="dyns">'+v+'</div><div class="dyn_add_gift"><svg aria-hidden="true" role="img"><use xlink:href="#add"></use></svg><span>Add a new gift</span></div></div>');var f=0;0==c.length&&(f=r,(sval=F(".prefill_repartition u")[i])?f=W(sval):i==p&&(f=d));var h="avatar";0==n[i]&&(h="charity"),R(M(".qid-repartition .sd_"+tpers),'<div class="dyn clear dynbenef-'+e[i]+'"><div class="benefid">'+e[i]+'</div><div class="ico '+h+'"></div><div class="inner"><div class="finput"><input type="text" value="'+f+'" class="input dyn_percent" inputmode="decimal"><span class="percent">%</span></div><div class="benefname">'+t[i]+"</div></div></div>");var y=M(".qid-repartition .dynbenef-"+e[i]+" .dyn_percent");y.addEventListener("keydown",le),y.addEventListener("keyup",ue),y.addEventListener("change",ue)}}for(i=0;i<c.length;i++){l=0;for(j=0;j<e.length;j++)if(c[i]==e[j]){l=1;break}0==l&&(B(F(".dynbenef-"+c[i]+", .extra-reserve .extra-"+c[i])),de())}for(i=0;i<c.length;i++)J(F(".qid-children_list .check.dynbenef-"+e[i]),"<span></span>"+t[i]),J(F(".qid-executors_list .check.dynbenef-"+e[i]),"<span></span>"+t[i]),J(F(".qid-gifts .gift_item.dynbenef-"+e[i]+" b, .qid-repartition .dyn.dynbenef-"+e[i]+" .benefname, .extra-reserve .extra-"+e[i]+" .benefname"),t[i]);c=e,t,n}function _e(){tp_da=xe();var e=qe(tp_da,"beneficiaries_persons"),t=F(".qid-executors_list .check");for(T(F(".qid-executors_list .check"),"rco"),A(t[0],"rco"),i=0;i<e.length;i++)if(["Spouse","Civil Partner","Partner"].includes(e[i][1]))for(j=0;j<t.length;j++)W(t[j])==e[i][0]&&A(t[j],"rco")}function me(e,i,n){(t=e.target.closest(i))&&n()}function be(){Y(M(".couponapply"),"...");var e=M(".couponinput").value;B(F(".coupon_err"));var t=M(".pay_right .total .value").innerHTML;Z("check_coupon.html",{coupon:e,intent:f,value:t}).then(e=>e.text()).then(i=>{if(i>0){var n=t*i/100,s=(t-n).toFixed(2);Y(M(".pay_right .total .value"),s),v=i/100,G(M(".coupon")),O(M(".addcoupon")),R(M(".coupon"),'<div class="coupon_ok">Coupon applied (<b>'+e.toUpperCase()+"</b>)</div>"),Y(M(".coupon .title"),""),B(F(".couponinput, .couponapply")),Y(M(".price-coupon .itm"),"Coupon (-"+i+"%)"),Y(M(".price-coupon .price .value"),n.toFixed(2)),G(M(".price-coupon")),Y(M(".pay_left .sec_submit .text"),"Confirm and pay "+d+s)}else Y(M(".couponapply"),"Apply"),R(M(".coupon"),'<div class="coupon_err">Sorry, this code does not exist or has expired.</div>')})}function ge(){function e(e,t,i="Yes",n=".active"){(stepcheck=M(e+" "+n))&&W(stepcheck)==i&&t()}H(F(".item.hidden, .context.hidden, .beneficiaries-scotland")),e(".qid-testator_foreignassets",function(){I(F(".qid-testator_foreignassets_include, .ctx-assets"))}),e(".qid-children_minor",function(){I(F(".qid-guardians, .qid-children_trust")),e(".qid-children_trust",function(){G(M(".qid-children_list"))}),e(".qid-guardians",function(){G(M(".qid-guardians_persons"))})}),e(".qid-pets",function(){I(F(".qid-pets_who, .qid-pets_fund")),e(".qid-pets_who",function(){G(M(".qid-pets_persons"))},"Someone else"),e(".qid-pets_fund",function(){G(M(".qid-pets_fund_value"))})}),e(".qid-testator_domicile",function(){G(M(".beneficiaries-scotland"))},"Scotland"),F(".extra-reserve .briefstep").forEach(e=>{(titem=S(e,".item:not(.dyn_people) .active"))&&"Give them to specific persons"==W(titem)&&G(S(e,".dyn_people"))}),e(".qid-executors_addextra",function(){I(F(".qid-executors_persons_extra"))},"Add someone else"),""!=l?(H(F(".help_one, .help_pair")),I(F(".help_free"))):M(".qid-nbwills .active")&&"One"==W(M(".qid-nbwills .active .choice"))?(I(F(".help_one")),H(F(".help_pair"))):(H(F(".help_one")),I(F(".help_pair"))),J(F(".curr"),d);var t="via tracked post",i=ce;e(".qid-delivery .active .choice",function(){t="by email as a PDF",i=oe},"Download",""),e(".qid-delivery .active .choice",function(){t="via 1st Class post",i=re},"Mail",""),J(F(".help_delivery"),"Receive your will "+t+" <span>"+i+"</span>")}function xe(){var e=[];function t(e){return e.className.match(/qid\-([a-z_]+)/)[1]}function i(e,t="",i=""){var n="";if(""==t)var s=e;else if(tfs=S(e,t))s=tfs;return s&&("val"==i?(n=s.value,s.options&&s.options[s.selectedIndex].disabled&&(n="")):n=W(s)),X(n)}F(".fs_radio").forEach(n=>{e.push([t(n),i(n,".active")])}),F(".bigchoice").forEach(n=>{e.push([t(n),i(n,".active .choice")])}),F(".fs_check").forEach(n=>{var s=[];L(n,".active").forEach(e=>{s.push(i(e))}),e.push([t(n),s])}),F(".fs_input").forEach(n=>{e.push([t(n),i(n,".input","val")])}),F(".fs_minput").forEach(n=>{var s=0;L(n,".input").forEach(a=>{e.push([t(n)+"_"+s,i(a,"","val")]),s++})}),F(".fs_dyn").forEach(n=>{var s=[];L(n,".dyn").forEach(e=>{var t="",n=[];L(e,".input, .select").forEach(e=>{var s=i(e,"","val");t+=s,n.push(s)}),""!=t&&s.push(n)}),e.push([t(n),s])}),F(".dyn-gifts").forEach(n=>{var s=[];L(n,".gift_item").forEach(e=>{var t=[];L(e,".dyn").forEach(e=>{var n=i(e,".selector .active"),s=i(e,".inner .input","val");s.length>0&&("Property"==n?t.push([n,s,i(e,".inner .input2","val")]):t.push([n,s]))}),s.push(t)}),e.push([t(n),s])});var n=[];return F(".extra-reserve .briefstep").forEach(e=>{var t=i(e,".item .active"),s=[];"Give them to specific persons"==t&&L(e,".dyn").forEach(e=>{var t="",n=[];L(e,".input, .select").forEach(e=>{var s=i(e,"","val");t+=s,n.push(s)}),""!=t&&s.push(n)}),n.push([t,s])}),e.push(["benefreserve",n]),e}function we(){for(p_da=xe(),tconts="<p><b>"+qe(p_da,"testator_name_0")+" "+qe(p_da,"testator_name_1")+"</b><br>"+qe(p_da,"testator_address_0")+"<br>",""!=qe(p_da,"testator_address_1")&&(tconts+=qe(p_da,"testator_address_1")+"<br>"),tconts+=qe(p_da,"testator_address_2")+"<br>",""!=qe(p_da,"testator_address_3")&&(tconts+=qe(p_da,"testator_address_3")+"<br>"),tconts+="</p><p>Status: "+qe(p_da,"testator_relationship")+"</p>",Y(S(F(".brecap .box")[0],".conts"),tconts),tbenef=qe(p_da,"beneficiaries_persons").concat(qe(p_da,"beneficiaries_charities")),tgifts=qe(p_da,"gifts"),trep=qe(p_da,"repartition"),tres=qe(p_da,"benefreserve"),tconts="",tconts2="",cgifts=0,i=0;i<tbenef.length;i++){tconts_r="";var e='<span class="under">If predeceasing me: ';if(3==tbenef[i].length)switch(tres[i][0]){case"Give them to their children":tconts_r+=e+"shared between any children they have</span>";break;case"Give them to their spouse or civil partner":tconts_r+=e+"going to their spouse or civil partner</span>";break;case"Share them between the remaining beneficiaries":tconts_r+=e+"shared between the remaining beneficiaries</span>";break;case"Give them to specific persons":if(tconts_r+=e,tlen=tres[i][1].length,1==tlen)tconts_r+="going to "+tres[i][1][0][0];else for(tconts_r+="shared between ",j=0;j<tlen;j++)tconts_r+=tres[i][1][j][0]+" ",tlen-j==2?tconts_r+=" and ":tlen-j>2&&(tconts_r+=", ");tconts_r+="</span>"}if(tgifts[i].length>0){for(tconts+="<p><b>For "+tbenef[i][0]+": ",tlen=tgifts[i].length,j=0;j<tlen;j++)"Cash"==tgifts[i][j][0]?tconts+=d+tgifts[i][j][1]:"Property"==tgifts[i][j][0]?tconts+=tgifts[i][j][2]+"% of my property located at "+tgifts[i][j][1]:"Item"==tgifts[i][j][0]?tconts+="my "+tgifts[i][j][1]:"Collection of items"==tgifts[i][j][0]&&(tconts+="all of my "+tgifts[i][j][1]),tlen-j==2?tconts+=" and ":tlen-j>2&&(tconts+=", ");tconts+="</b><br>",tconts+=tconts_r,tconts+="</p>",cgifts++}trep[i]>0&&(tconts2+="<p><b>"+tbenef[i][0]+" ("+trep[i]+"%)</b><br>",tconts2+=tconts_r,tconts2+="</p>")}for(0==cgifts&&(tconts+='<p class="empty">No gifts.</p>'),Y(S(F(".brecap .box")[1],".conts"),tconts),Y(S(F(".brecap .box")[2],".conts"),tconts2),tconts="",tnb=0,texec=qe(p_da,"executors_list"),texec_extra=qe(p_da,"executors_addextra"),texec_extra_list=qe(p_da,"executors_persons_extra"),i=0;i<texec.length;i++)tconts+="<p>"+texec[i]+"</p>",tnb++;if(texec_extra.length>0)for(i=0;i<texec_extra_list.length;i++)tconts+="<p>"+texec_extra_list[i][0]+"</p>",tnb++;if(tplur="",tnb>1&&(tplur="s"),Y(S(F(".brecap .box")[3],".title span"),"Executor"+tplur),Y(S(F(".brecap .box")[3],".conts"),tconts),tconts="",ttrust=qe(p_da,"children_list"),tguardians=qe(p_da,"guardians_persons"),"No"==qe(p_da,"children_minor"))tconts+='<p class="empty">No minor children.</p>';else{if("Yes"==qe(p_da,"guardians")){for(tplur="",tguardians.length>1&&(tplur="s"),tconts+="<p><b>Appointing guardian"+tplur+":</b><br>",i=0;i<tguardians.length;i++)tconts+=tguardians[i][0]+"<br>";tconts+="</p>"}else tconts+='<p class="empty">Not appointing guardians.</p>';if("Yes"==qe(p_da,"children_trust"))for(tconts+="<p><b>My executor(s) will manage their inheritance until they turn 18:</b></p>",i=0;i<ttrust.length;i++)tconts+=ttrust[i]+"<br>"}Y(S(F(".brecap .box")[4],".conts"),tconts),tconts="",tpets=qe(p_da,"pets_persons"),"No"==qe(p_da,"pets")?tconts+='<p class="empty">No pets.</p>':("My executors"==qe(p_da,"pets_who")?tconts+="<p>Appointing my executors to look after my pets.</p>":tconts+="<p>Appointing "+tpets[0][0]+" to look after my pets.</p>","Yes"==qe(p_da,"pets_fund")&&(tconts+="<p>Allocating "+d+qe(p_da,"pets_fund_value")+" to look after my pets.</p>")),Y(S(F(".brecap .box")[5],".conts"),tconts),t_dig="uthorising my executors to deal with my digital assets.</p>","No"==qe(p_da,"digital_assets")?tconts='<p class="empty">Not a'+t_dig:tconts="<p>A"+t_dig,Y(S(F(".brecap .box")[6],".conts"),tconts),tconts="<p>"+qe(p_da,"funerals")+"</p>",Y(S(F(".brecap .box")[7],".conts"),tconts),t_del="Free PDF download","Mail"==qe(p_da,"delivery")?t_del="Free 1st Class post delivery":"Urgent"==qe(p_da,"delivery")&&(t_del="Priority review and tracked courier delivery"),tconts="<p>"+t_del+"</p>",Y(S(F(".brecap .box")[8],".conts"),tconts)}function qe(e,t){for(i=0;i<e.length;i++)if(e[i][0]==t)return e[i][1];return""}document.onclick=function(i){var n=i.target;me(i,".radio, .check",function(){var e=t.classList;e.contains("radio")?(T(L(t.parentNode,".radio"),"active"),e.add("active")):e.toggle("active");var i=t.closest(".item");function s(e){if("No"==W(e.closest(".radio")))return!0}P(i,"error"),B(L(i,".helperror")),N(i,"qid-testator_foreignassets")&&s(n)?T(F(".qid-testator_foreignassets_include .radio"),"active"):N(i,"qid-children_minor")&&s(n)?T(F(".qid-children_trust .radio, .qid-guardians .radio"),"active"):N(i,"qid-pets")&&s(n)&&T(F(".qid-pets_who .radio, .qid-pets_fund .radio"),"active")}),me(i,".helpbtn",function(){var e,i;e=t,i="active",e.classList.toggle(i),ee(S(t.closest(".item"),".helptxt"),40)}),me(i,".radio, .check, .next div",function(){ge()}),me(i,".next .button",function(){!function(){var t=F(".briefstep")[o];T(L(t,".item"),"error"),B(L(t,".helperror")),T(L(t,".helpbtn"),"active"),H(L(t,".helptxt, .error.hidden"));var i=0,n=9999;function r(e,t="Please select one"){if("block"==window.getComputedStyle(e).display){i++;var s=e.offsetTop;s<n&&(n=s),A(e,"error"),R(e,'<span class="clear"></span><span class="helperror">'+t+"</span>")}}if(L(t,".fs_radio.required, .fs_check.required, .bigchoice.required").forEach(e=>{S(e,".active")||N(t,"c_exec")&&(exists=M(".qid-executors_addextra .active"))&&(exists2=M(".qid-executors_persons_extra .dyn_name"))&&exists2.value.length>0||r(e)}),L(t,".fs_input.required").forEach(e=>{var t=S(e,".input").value;t.length<1?r(e,"Required"):e.classList.contains("qid-testator_email")&&0==/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-_]+\.[a-zA-Z0-9]{2,}$/.test(t.trim())&&r(e,"Incorrect format, please check for any typo")}),L(t,".dyn_people").forEach(e=>{var t=0;L(e,".dyn").forEach(e=>{""!=S(e,".dyn_name").value&&(t=1)}),0==t&&r(e,"Required - please add at least one")}),L(t,".dyn-repartition").forEach(e=>{var t=0;L(e,".dyn input").forEach(e=>{t+=parseFloat(parseFloat(e.value).toFixed(2)),t=parseFloat(t.toFixed(2))}),100!=t&&r(e,"Please make sure the total is exactly 100.00%")}),L(t,".fs_minput.required").forEach(e=>{var t=0;L(e,".input.required").forEach(e=>{e.value.length<1&&t++}),t>0&&r(e,"Required")}),i>0)window.scrollTo(0,n-20);else{if(""==l&&N(F(".briefstep")[o],"c_about")&&["Single","Widowed"].includes(W(M(".qid-testator_relationship .active")))){var c=F(".qid-nbwills .radio");P(c[1],"active"),A(c[0],"active"),q=1}S(F(".briefstep")[o],".qid-testator_email")&&(0==y&&(y=1,_=Math.floor(999999998*Math.random()+1)),te("ema")),(N(F(".briefstep")[o],"stepbenef")||1==y&&0==m)&&(ye(),_e()),1==y&&Z("started.html?wv="+l,{briefdata:JSON.stringify(xe()),sess:_,utm:x,gclid:g,evid:b}),O(t),o++,1==q&&(o++,q=0);var k=F(".briefstep")[o];S(F(".briefstep")[o],".qid-repartition")&&se(),w>0&&N(k,"c_s")&&(o=a-3,k=M(".brecap"),w=0),N(k,"brecap")&&we(),G(k),window.scrollTo(0,0),$(),window.location.hash="#s"+o,o==a-2&&function(){if(p_data=xe(),""!=l)H(F(".recap_r .button, .pay_right, .pay_left")),Z("questionnaire.html?wv="+l,{briefdata:JSON.stringify(p_data),sess:_}).then(e=>e.text()).then(e=>{O(F(".briefstep")[o]),o++;var t=F(".briefstep")[o];G(t),G(S(t,".pay_left")),window.scrollTo(0,0),$(),h=1});else{I(F(".pay_right, .pay_left"));var t=W(M(".qid-nbwills .active .choice"));baseprice=99,baseitem="Will","Pair"==t&&(baseprice=149,baseitem="Wills x2"),Y(M(".price-will .value"),baseprice.toFixed(2)),Y(M(".price-will .itm"),baseitem);var i=W(M(".qid-delivery .active .choice"));deliveryprice=0,deliveryitem="Free download","Mail"==i?deliveryitem="Mail delivery":"Urgent"==i&&(baseprice+=15,deliveryitem="Urgent delivery",deliveryprice=15),Y(M(".pay_right .price-delivery .itm"),deliveryitem),Y(M(".pay_right .price-delivery .value"),deliveryprice.toFixed(2)),v>0&&(discount_val=baseprice*v,baseprice-=discount_val,Y(M(".price-coupon .price .value"),discount_val.toFixed(2))),baseprice=baseprice.toFixed(2),Y(M(".pay_right .total .value"),baseprice),Y(M(".pay_left .sec_submit .text"),"Confirm and pay "+d+baseprice);var n=X(M(".qid-testator_email input").value);""==f?Z("questionnaire.html",{ini_payment:1,price:baseprice,curr:p,email:n,evid:b}).then(e=>e.text()).then(e=>{f=e,""==u&&""!=M(".couponinput").value&&be()}):Z("questionnaire.html",{upd_payment:1,price:baseprice,curr:p,intent:f,email:n,evid:b}).then(e=>e.text()).then(e=>{""==u&&""!=M(".couponinput").value&&be()}),te("ini"),0==E&&(E=1,M("#payment-form").addEventListener("submit",function(t){t.preventDefault(),0==M("#card-submit").disabled&&(M("#card-submit").disabled=!0,H(F("#card-submit .icon, #card-submit .text")),G(M("#card-submit .load")),O(M(".err-card")),T(F(".field"),"err"),J(F(".field .inline-err"),""),e.confirmCardPayment(f,{payment_method:{card:s}}).then(function(e){if(e.error){var t=e.error.code;if("payment_intent_authentication_failure"==t)G(M(".err-auth"));else{var i="number";/_expiry/.test(t)?i="expiry":/_cvc/.test(t)&&(i="cvv"),A(M(".field-"+i),"err"),Y(M(".field-"+i+" .inline-err"),e.error.message)}M("#card-submit").disabled=!1,I(F("#card-submit .icon, #card-submit .text")),O(M("#card-submit .load"))}else{var n=e.paymentIntent.id;Z("questionnaire.html",{briefdata:JSON.stringify(p_data),paymentintent:n,coupon:u,sess:_,evid:b}).then(e=>e.text()).then(e=>{"success"==e?(te("pur",baseprice,n),O(F(".briefstep")[o]),o++,G(F(".briefstep")[o]),window.scrollTo(0,0),$(),h=1):(G(M(".err-card")),M("#card-submit").disabled=!1,I(F("#card-submit .icon, #card-submit .text")),O(M("#card-submit .load")))})}}))}))}}()}}()}),me(i,".next .back",function(){window.history.go(-1)}),me(i,".error .input",function(){var e=t.closest(".item");P(e,"error"),B(L(e,".helperror"))}),me(i,"select",function(){t.style.color="#000"}),me(i,".finput",function(){S(t,"input").focus()}),me(i,".dyn_add",function(){var e,i,n=t.closest(".item"),s=S(n,".dyn").cloneNode(!0);O(s),G(S(s,".remove")),P(S(s,".ico"),"gr"),e=L(s,".input"),i="",e.forEach(e=>e.value=i),S(s,"select").style.color="",z(S(s,"select"),"Relationship to you"),S(n,".benefid")&&(r++,Y(S(s,".benefid"),r)),ee(S(n,".dyns").appendChild(s),60)}),me(i,".dyn_add_charity",function(){r++;var e=S(t.closest(".item"),".dyns");R(e,'<div class="dyn clear dtop" style="display:none"><div class="benefid">'+r+'</div><div class="ico charity"></div><div class="remove" style="display:block"></div><div class="inner"><input type="text" class="input dyn_name dcheck" placeholder="Name of the charity"><input type="text" class="input dyn_address" placeholder="Address or city"></div></div>'),ee(e.lastChild,60)}),me(i,".dyns .remove",function(){D(t.closest(".dyn"))}),me(i,".dyn_add_gift",function(){var e,i=S(t.closest(".gift_item"),".dyns");R(i,'<div class="dyn clear" style="display:none"><div class="selector"><div class="mobclear"><div class="ico gift"></div><div class="remove"></div></div><div class="radio"><u>Cash</u></div><div class="radio mradio"><u>Property</u></div><div class="radio"><u>Collection of items</u></div><div class="radio mradio"><u>Item</u></div></div><div class="dyn-gifts-cash dyn-other hidden dtop"><div class="mobclear"><div class="ico cash"></div><div class="remove"></div></div><div class="inner"><div class="finput"><span class="curr"><u class="curr">'+d+'</u></span><input type="text" class="input dyn_cash dcheck" inputmode="decimal"></div><span class="help">e.g. <u class="curr">'+d+'</u>500</span></div></div><div class="dyn-gifts-property dyn-other hidden dtop"><div class="mobclear"><div class="ico property"></div><div class="remove"></div></div><div class="inner"><div class="finput"><span>My property located at</span><input type="text" class="input dyn_property dcheck"></div><span class="help">e.g. 12 Bridge Road W12 N34, London</span><div class="finput percent"><input type="text" class="input input2 dyn_percent" value="100.00" inputmode="decimal"><span class="pc">% of the property</span></div><span class="help">e.g. to split this property between two beneficiaries you can gift 50% each</span></div></div><div class="dyn-gifts-item dyn-other hidden dtop"><div class="mobclear"><div class="ico gift"></div><div class="remove"></div></div><div class="inner"><div class="finput"><span>My</span><input type="text" class="input dyn_item dcheck"></div><span class="help">e.g. my Volvo car registered WXX0000, my green necklace, etc.</span></div></div><div class="dyn-gifts-collection dyn-other hidden dtop"><div class="mobclear"><div class="ico gift"></div><div class="remove"></div></div><div class="inner"><div class="finput"><span>All of my</span><input type="text" class="input dyn_item dcheck"></div><span class="help">e.g. all of my jewels</span></div></div></div>'),ee(i.lastChild,60),(e=S(i.lastChild,".dyn_percent")).addEventListener("keydown",le),e.addEventListener("keyup",ue),e.addEventListener("change",ue),(e=S(i.lastChild,".dyn_cash")).addEventListener("keydown",fe),e.addEventListener("keyup",he),e.addEventListener("change",he)}),me(i,".dyn-gifts .selector .radio",function(){var e=W(t);e="Cash"==e?"cash":"Property"==e?"property":"Item"==e?"item":"collection",O(t.closest(".selector")),tdyn=t.closest(".dyn"),P(S(tdyn,".dyn-gifts-"+e),"hidden"),B(L(tdyn,".dyn-other.hidden"))}),me(i,".brecap .btne",function(){n_cat=U(t,"cat"),w=1,O(F(".briefstep")[o]),o=[].slice.call(F(".briefstep")).indexOf(M(".c_"+n_cat)),G(M(".c_"+n_cat)),window.scrollTo(0,0),$(),window.location.hash="#s"+o}),me(i,".addcoupon",function(){O(M(".addcoupon")),G(M(".coupon"))}),me(i,".couponcancel",function(){G(M(".addcoupon")),O(M(".coupon"))}),me(i,".couponapply",function(){be()})},document.oninput=function(e){var t=e.target;N(t,"dcheck")&&(""==t.value?P(S(t.closest(".dtop"),".ico"),"gr"):A(S(t.closest(".dtop"),".ico"),"gr"))},ge(),window.onpopstate=function(){if(""==location.hash)var e=0;else e=parseInt(location.hash.match(/s([0-9]+)/)[1]);0==h&&(e<o||e==a-3)&&(O(F(".briefstep")[o]),o=e,G(F(".briefstep")[o]),window.scrollTo(0,0),$())},window.onbeforeunload=function(){if(0==h&&(o>0||y>0))return"Changes that you made may not be saved."},te("sta")}"loading"!==document.readyState?core():document.addEventListener("DOMContentLoaded",core);
